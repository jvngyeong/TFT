<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript">
		$(function(){
			$("#sample4_roadAddress").click(function(){
				execDaumPostcode();
			});
			
			
		    $('#empForm').submit(function(event) {
		        event.preventDefault(); // 기본 폼 제출 방지
		        
		        // FormData 객체를 사용하여 폼 데이터 준비
		        var formData = new FormData(this);
				$.ajax({
					type : "post",
					url : "/employee/employeeWrite",
					data: formData,
					dataType : "json",
					contentType: false, 
					processData: false,
					success : function(result){
						if(JSON.stringify(result) == '{}'){
							location.href = "/";
						}
						else{
							for (let field in result) {
					            const errorMessage = result[field]; // 각 필드의 에러 메시지
					            if(errorMessage != ''){
					            	$("#"+field).text(errorMessage);
					            	$("#"+field).css("color", "red");
					            }
					        }
						}
					},
					error : function(xhr){
						alert("실패");
					}
				});
			});
			
		});
	</script>
</head>
<body>
	<div id="wholeContent">
		<!-- Page content -->
		<div id="pageContent">
			<div class="w3-content w3-padding" style="max-width: 1564px">
				<!-- Contact Section -->
				<div class="w3-container w3-padding-32" id="contact">
					<br />
					<h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">직원 가입</h3>
					<p>가입에 필요한 정보를 입력해주세요.</p>
					<form id = "empForm" method = "post" th:object="${employeeCommand}">
						<input class="w3-input w3-section w3-border" type="text" placeholder="ID" name="empId">
						<div id = "empId" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="password" placeholder="Password" name="empPw" th:value="${employeeCommand.empPw}">
						<div id = "empPw" class = "errMsg"></div> 
						<input class="w3-input w3-section w3-border" type="text" placeholder="이름" name="empName"> 
						<div id = "empName" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="text" id = "sample4_roadAddress" placeholder="주소" name="empAddr" readonly="readonly"> 
						<div id = "empAddr" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="text" placeholder="상세 주소" name="empAddrDetail">
						<input class="w3-input w3-section w3-border" type="text" id = "sample4_postcode" placeholder="우편번호" name="empPost" readonly="readonly">
						<div id = "empPost" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="tel" placeholder="전화번호" name="empPhone">
						<div id = "empPhone" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="text" placeholder="주민번호" name="empJumin">
						<div id = "empJumin" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="email" placeholder="이메일" name="empEmail"> 
						<div id = "empEmail" class = "errMsg"></div>
						<input class="w3-input w3-section w3-border" type="file" name="empImage">
						<div id = "empImage" class = "errMsg"></div>
						<input class="w3-button w3-black w3-section" type="submit" value = "가입하기">
					</form>
				</div>	
				<!-- End page content -->
			</div>
		</div>

		<!-- Footer -->
		<footer class="w3-center w3-black w3-padding-16">
			<p>
				Powered by <a href="https://www.w3schools.com/w3css/default.asp"
					title="W3.CSS" target="_blank" class="w3-hover-text-green">w3.css</a>
			</p>
		</footer>
	</div>
</body>
</html>
